{
	"nodeid": "file_hash_md5",
	"title": "MD5",
	"type": "file",
	"subtype": "hash",
	"description": "Calculate MD5 sum for a file.",

	"scripts": {
        "hello": "out.say('news', 'You just created a MD5 node'); ",
        "bye": "out.say('finish', 'Deleted node!'); ",
		"init": "out.say('progress', 'Starting to calculate MD5 ...');",
		"pre_run": 
		[
			"var d = context.doc; ",
			"var s = context.node.params; ",
			"var ext = ''; ",
			"var fpath = ''; ",
			
			"if (s.ext != '') ",
			"    ext = d[s.ext]; ",
			
			"if(s.dir != '' && s.file != '') ",
			"    fpath = context.path.join(d[s.dir], d[s.file]); ",
			"else if (s.dir != '') ",
			"    fpath = d[s.dir]; ",
			"else if (s.file != '') ",
			"    fpath = d[s.file]; ",
			
			"out.pre_value = fpath + s.comma + ext; "
		],
		"run":[
			"if(context.data.stat != 'fail') {",
			"    out.value = context.data.sizes;",
			"}",
			"out.say('progress', '<img src=\"' + context.data.sizes.size[3].source + '\"/>'); "
			],
		"finish":"out.say('finish', 'Flickr image URLs fetched'); "
	},
	
	"views": {
		"data_static":"<button data-bind=\"click: prevPage\">prev</button>\n<button data-bind=\"click: nextPage\">next</button>\n\n<div>\n<table>\n<thead>\n<tr>\n<th id=\"vcc\" data-bind=\"click: sort\">[count]</th>\n<th id=\"id\" data-bind=\"click: sort\">id</th>\n<th id=\"title\" data-bind=\"click: sort\">title</th>\n<th id=\"description\" >description</th>\n<th id=\"link\" >link</th>\n </tr>\n</thead>\n\n<tbody data-bind=\"foreach: collection\">\n<tr>\n<td data-bind=\"text: vcc\"></td>\n<td data-bind=\"text: id\"></td>\n<td >\n<img data-bind=\"attr:{src: id_photo_sizes.size[1].source}\"></img>\n</td>\n<td data-bind=\"text: title\"></td>\n\n </tr>\n </tbody>\n </table>\n</div>\n",
		"params":
		[
			"<div>You can combine full file path with these inputs. If full path is available, then just select it as an input field and leave rest empty.</div>",
			"<label>directory  </label><input name='dir' class='dynamic_field'/> ",
			"<label>file name </label><input name='file' class='dynamic_field'/> ",
			"<label>comma?</label><input name='comma' class='short_input'/> ",
			"<label>extension</label><input name='ext' class='dynamic_field'/> ",
			"<label>output</label><input name='out_field' value='md5'/> "
		],
		"settings":"no settings"
	}

}
